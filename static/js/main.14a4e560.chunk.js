(this["webpackJsonpreact-firebase-v9"]=this["webpackJsonpreact-firebase-v9"]||[]).push([[0],{106:function(e,t,n){},107:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),i=n(38),a=n.n(i),r=(n(96),n(15)),o=(n(97),n(149)),u=n(146),l=n(147),d=n(6);function j(e){var t=e.title,n=e.handleAction;return Object(d.jsx)(l.a,{variant:"contained",onClick:n,children:t})}function h(e){var t=e.title,n=e.setPassword,s=e.setEmail,c=e.handleAction;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{id:"title",children:"Expense Manager App"}),Object(d.jsx)("div",{className:"heading-container",children:Object(d.jsxs)("h3",{id:"login",children:["User ",t]})}),Object(d.jsxs)(o.a,{component:"form",sx:{"& > :not(style)":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[Object(d.jsx)(u.a,{id:"email",label:"Email id",variant:"outlined",onChange:function(e){return s(e.target.value)}}),Object(d.jsx)("p",{}),Object(d.jsx)(u.a,{id:"password",type:"password",label:"Password",variant:"outlined",onChange:function(e){return n(e.target.value)}})]}),Object(d.jsx)(j,{title:t,handleAction:c})]})}var b=n(24),p=n(2),m=n(4),x=n(28),O=n(11),f=n(12),g=n(57),v=n(72);n(110);v.a.initializeApp({apiKey:"AIzaSyCesEs8-HKWyxbMt4fVZlx49zU_24fAlZw",authDomain:"expenseapp-de1e4.firebaseapp.com",projectId:"expenseapp-de1e4",storageBucket:"expenseapp-de1e4.appspot.com",messagingSenderId:"823544384312",appId:"1:823544384312:web:3a3c325be65c3389fc0fcd"});var E=v.a.firestore().collection("/expense"),N=new(function(){function e(){Object(p.a)(this,e)}return Object(m.a)(e,[{key:"getAll",value:function(){return E}},{key:"create",value:function(e){return E.add(e)}},{key:"update",value:function(e,t){return E.doc(e).update(t)}},{key:"delete",value:function(e){return E.doc(e).delete()}}]),e}()),y=n(42),k=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(p.a)(this,n),(s=t.call(this,e)).onChangeName=s.onChangeName.bind(Object(x.a)(s)),s.onChangeAmount=s.onChangeAmount.bind(Object(x.a)(s)),s.onChangeDescription=s.onChangeDescription.bind(Object(x.a)(s)),s.updatePublished=s.updatePublished.bind(Object(x.a)(s)),s.updateExpense=s.updateExpense.bind(Object(x.a)(s)),s.deleteExpense=s.deleteExpense.bind(Object(x.a)(s)),s.state={currentExpense:{id:null,amount:0,name:"",description:"",published:!1},message:""},s}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.setState({currentExpense:this.props.expense})}},{key:"onChangeName",value:function(e){var t=e.target.value;this.setState((function(e){return{currentExpense:Object(y.a)(Object(y.a)({},e.currentExpense),{},{name:t})}}))}},{key:"onChangeAmount",value:function(e){var t=e.target.value;this.setState((function(e){return{currentExpense:Object(y.a)(Object(y.a)({},e.currentExpense),{},{amount:t})}}))}},{key:"onChangeDescription",value:function(e){var t=e.target.value;this.setState((function(e){return{currentExpense:Object(y.a)(Object(y.a)({},e.currentExpense),{},{description:t})}}))}},{key:"updatePublished",value:function(e){var t=this;N.update(this.state.currentExpense.id,{published:e}).then((function(){t.setState((function(t){return{currentExpense:Object(y.a)(Object(y.a)({},t.currentExpense),{},{published:e}),message:"The status was updated successfully!"}}))})).catch((function(e){console.log(e)}))}},{key:"updateExpense",value:function(){var e=this,t={title:this.state.currentExpense.title,amount:this.state.currentExpense.amount,description:this.state.currentExpense.description};N.update(this.state.currentExpense.id,t).then((function(){e.setState({message:"The Expense was updated successfully!"})})).catch((function(e){console.log(e)}))}},{key:"deleteExpense",value:function(){var e=this;N.delete(this.state.currentExpense.id).then((function(){e.props.refreshList()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.currentExpense;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h4",{children:"Expense"}),t?Object(d.jsxs)("div",{className:"edit-form",children:[Object(d.jsxs)("form",{children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"title",children:"Name"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"name",value:t.name,onChange:this.onChangeName})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"amount",children:"Amount"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"description",value:t.amount,onChange:this.onChangeAmount})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"description",children:"Description"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"description",value:t.description,onChange:this.onChangeDescription})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:Object(d.jsx)("strong",{children:"Status:"})}),t.published?"Published":"Pending"]})]}),t.published?Object(d.jsx)("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updatePublished(!1)},children:"UnPublish"}):Object(d.jsx)("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updatePublished(!0)},children:"Publish"}),Object(d.jsx)("button",{className:"badge badge-danger mr-2",onClick:this.deleteExpense,children:"Delete"}),Object(d.jsx)("button",{type:"submit",className:"badge badge-success",onClick:this.updateExpense,children:"Update"}),Object(d.jsx)("p",{children:this.state.message})]}):Object(d.jsxs)("div",{children:[Object(d.jsx)("br",{}),Object(d.jsx)("p",{children:"Please click on a Expense..."})]})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.expense;return t.currentExpense.id!==n.id?{currentExpense:n,message:""}:t.currentExpense}}]),n}(s.Component);n(106);function C(){var e=Object(b.f)();return Object(s.useEffect)((function(){var t=sessionStorage.getItem("Auth Token");console.log(t),t&&e("/home"),t||e("/login")}),[]),Object(d.jsx)("div",{children:Object(d.jsx)("button",{className:"button",onClick:function(){sessionStorage.removeItem("Auth Token"),e("/login")},children:"Log out"})})}var w=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(p.a)(this,n),(s=t.call(this,e)).refreshList=s.refreshList.bind(Object(x.a)(s)),s.onDataChange=s.onDataChange.bind(Object(x.a)(s)),s.state={expenses:[],currentExpense:null,currentIndex:-1},s.unsubscribe=void 0,s}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.unsubscribe=N.getAll().orderBy("name","asc").onSnapshot(this.onDataChange)}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var n=e.id,s=e.data();t.push({id:n,name:s.name,amount:s.amount,description:s.description,published:s.published})})),this.setState({expenses:t})}},{key:"refreshList",value:function(){this.setState({currentExpense:null,currentIndex:-1})}},{key:"render",value:function(){var e=this.state,t=e.expenses,n=e.currentExpense;e.currentIndex;return Object(d.jsxs)("div",{className:"list row",children:[Object(d.jsxs)("div",{className:"col-md-6",children:[Object(d.jsxs)("div",{className:"minirow",children:[Object(d.jsx)("div",{className:"minicolumn",children:Object(d.jsx)("h4",{className:"header",children:"Expenses List"})}),Object(d.jsx)("div",{id:"logout",className:"minicolumn",children:Object(d.jsx)(C,{})})]}),Object(d.jsx)("ul",{className:"list-group",children:t&&t.map((function(e,t){return Object(d.jsxs)("li",{className:"note",children:[Object(d.jsx)("p",{className:"expese_name",children:e.name+"   -      "+e.description})," ",Object(d.jsxs)("h4",{className:"amount",children:["CAD$ ",e.amount]})]},t)}))})]}),Object(d.jsx)("div",{className:"col-md-6",children:n?Object(d.jsx)(k,{expense:n,refreshList:this.refreshList}):Object(d.jsxs)("div",{children:[Object(d.jsx)("br",{}),Object(d.jsx)("p",{})]})})]})}}]),n}(s.Component),A=(n(107),function(){return Object(d.jsxs)("div",{className:"receipts_section",children:[Object(d.jsx)("h3",{className:"receipts_header",children:"Expense Receipts"}),Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)("div",{className:"column",children:Object(d.jsx)("div",{className:"myDiv",children:Object(d.jsx)("img",{id:"image1",height:"150",width:"100"})})}),Object(d.jsx)("div",{className:"column",children:Object(d.jsx)("div",{className:"myDiv",children:Object(d.jsx)("img",{id:"image2",height:"150",width:"100"})})}),Object(d.jsx)("div",{className:"column",children:Object(d.jsx)("div",{className:"myDiv",children:Object(d.jsx)("img",{id:"image3",height:"150",width:"100"})})}),Object(d.jsx)("div",{className:"column",children:Object(d.jsx)("div",{className:"myDiv",children:Object(d.jsx)("img",{id:"image4",height:"150",width:"100"})})}),Object(d.jsx)("div",{className:"column",children:Object(d.jsx)("div",{className:"myDiv",children:Object(d.jsx)("img",{id:"image5",height:"150",width:"100"})})})]}),Object(d.jsx)("p",{})]})});function S(){var e=Object(b.f)();return Object(s.useEffect)((function(){var t=sessionStorage.getItem("Auth Token");console.log(t),t&&e("/home"),t||e("/login")}),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{}),Object(d.jsx)(w,{}),Object(d.jsx)(A,{})]})}var D=n(58),P=(n(108),n(51));var I=function(){var e=Object(s.useState)(""),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(s.useState)(""),a=Object(r.a)(i,2),o=a[0],u=a[1],l=Object(b.f)(),j=Object(P.b)(),p=Object(P.d)(j,"receipts");Object(P.c)(p).then((function(e){var t=1;e.items.forEach((function(e){Object(P.a)(Object(P.d)(j,e.name)).then((function(e){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(e){n.response},n.open("GET",e),n.send(),document.getElementById("image"+t++).setAttribute("src",e)})).catch((function(e){}))}))})).catch((function(e){}));var m=function(e){var t=Object(g.b)();1===e&&Object(g.c)(t,n,o).then((function(e){l("/home"),sessionStorage.setItem("Auth Token",e._tokenResponse.refreshToken)})).catch((function(e){console.log(e.code),"auth/wrong-password"===e.code&&D.b.error("Please check the Password"),"auth/user-not-found"===e.code&&D.b.error("Please check the Email")})),2===e&&Object(g.a)(t,n,o).then((function(e){l("/home"),sessionStorage.setItem("Auth Token",e._tokenResponse.refreshToken)})).catch((function(e){"auth/email-already-in-use"===e.code&&D.b.error("Email Already in Use")}))};return Object(s.useEffect)((function(){sessionStorage.getItem("Auth Token")&&l("/home")}),[]),Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(D.a,{}),Object(d.jsxs)(b.c,{children:[Object(d.jsx)(b.a,{path:"/login",element:Object(d.jsx)(h,{title:"Login",setEmail:c,setPassword:u,handleAction:function(){return m(1)}})}),Object(d.jsx)(b.a,{path:"/register",element:Object(d.jsx)(h,{title:"Register",setEmail:c,setPassword:u,handleAction:function(){return m(2)}})}),Object(d.jsx)(b.a,{path:"/home",element:Object(d.jsx)(S,{})})]})]})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,150)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),s(e),c(e),i(e),a(e)}))},L=n(52);a.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(L.a,{children:Object(d.jsx)(I,{})})}),document.getElementById("root")),T()},96:function(e,t,n){},97:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.14a4e560.chunk.js.map